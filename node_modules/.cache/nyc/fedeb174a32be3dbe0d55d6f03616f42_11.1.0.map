{"version":3,"sources":["textToJson.js"],"names":["fs","require","_","split","keys","readFile","inPath","useHeader","index","outData","readStream","createReadStream","pipe","on","line","toString","match","setHeaderRowAsKeys","addKeys","push","writeFile","yargs","o","object","module","exports","texttojson"],"mappings":";;AAAA,IAAIA,KAAKC,QAAQ,IAAR,CAAT;AACA,IAAIC,IAAID,QAAQ,YAAR,CAAR;AACA,IAAIE,QAAQF,QAAQ,OAAR,CAAZ;;AAEA,IAAIG,IAAJ;;AAGA,SAASC,QAAT,CAAkBC,MAAlB,EAA0BC,SAA1B,EAAqC;;AAEpC,KAAIC,QAAQ,CAAZ;AACA,KAAIC,UAAU,EAAd;;AAEA,KAAIC,aAAaV,GAAGW,gBAAH,CAAoBL,MAApB,EACfM,IADe,CACVT,OADU,EAEfU,EAFe,CAEZ,MAFY,EAEJ,UAAUC,IAAV,EAAgB;AAC3BA,SAAOA,KAAKC,QAAL,GAAgBC,KAAhB,CAAsB,gBAAtB,CAAP;AACA,MAAGF,IAAH,EAAQ;AACP,OAAGP,aAAaC,SAAS,CAAzB,EAA2B;AAC1BS,uBAAmBH,IAAnB;AACA,IAFD,MAGK,IAAGP,SAAH,EAAc;AAClB;AACAO,WAAOI,QAAQJ,IAAR,CAAP;AACAL,YAAQU,IAAR,CAAaL,IAAb;AACA,IAJI,MAKA;AACJ;AACAL,YAAQU,IAAR,CAAaL,IAAb;AACA;;AAEDN;AACA;AACD,EApBe,CAAjB;;AAsBAE,YAAWG,EAAX,CAAc,KAAd,EAAqB,YAAY;AAChCO,YAAUX,OAAV,EAAmBY,MAAMC,CAAzB;AACA,EAFD;;AAIA,QAAOb,OAAP;AACA;;AAGD,SAASQ,kBAAT,CAA4BH,IAA5B,EAAiC;AAChCV,QAAOU,IAAP;AACA;;AAED,SAASI,OAAT,CAAiBJ,IAAjB,EAAsB;AACrB,QAAOZ,EAAEqB,MAAF,CAASnB,IAAT,EAAeU,IAAf,CAAP;AACA;;AAEDU,OAAOC,OAAP,GAAiBC,UAAjB","file":"textToJson.js","sourceRoot":"C:/Users/OfficePC/Desktop/Nodejspractise/appliation","sourcesContent":["var fs = require('fs');\r\nvar _ = require('underscore');\r\nvar split = require('split');\r\n\r\nvar keys;\r\n\r\n\r\nfunction readFile(inPath, useHeader) {\r\n\r\n\tvar index = 0;\r\n\tvar outData = [];\r\n\r\n\tvar readStream = fs.createReadStream(inPath)\r\n\t\t.pipe(split())\r\n\t\t.on('data', function (line) {\r\n\t\t\tline = line.toString().match(/[^\\r\\n\\t' ']+/g);\r\n\t\t\tif(line){\r\n\t\t\t\tif(useHeader && index == 0){\r\n\t\t\t\t\tsetHeaderRowAsKeys(line);\r\n\t\t\t\t}\r\n\t\t\t\telse if(useHeader) {\r\n\t\t\t\t\t// create an object with header row keys\r\n\t\t\t\t\tline = addKeys(line);\r\n\t\t\t\t\toutData.push(line);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// array, no keys\r\n\t\t\t\t\toutData.push(line);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tindex++;\r\n\t\t\t}\r\n\t\t});\r\n\r\n\treadStream.on('end', function () {\r\n\t\twriteFile(outData, yargs.o);\r\n\t});\r\n\t\r\n\treturn outData;\r\n}\r\n\r\n\r\nfunction setHeaderRowAsKeys(line){\r\n\tkeys = line;\r\n}\r\n\r\nfunction addKeys(line){\r\n\treturn _.object(keys, line);\r\n}\r\n\r\nmodule.exports = texttojson;"]}